#!/usr/bin/ruby

require_relative "../lib/churn.rb"

CHURN_OPTS = {format: '--json'}
argv = ARGV - CHURN_OPTS.values
params = argv.reduce{ |a, b| a + " " + b} || ""
opt = CHURN_OPTS.delete_if{ |k, v| not ARGV.include? v}

begin
  Churn::root_directory = Dir.getwd
  puts Churn::get_output params, opt
rescue Exception => e
  puts e.message
end
